!function(){"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}(self.webpackChunkangular_travel=self.webpackChunkangular_travel||[]).push([[565],{5565:function(n,e,a){a.r(e),a.d(e,{FavoritesModule:function(){return O}});var o=a(5528),r=a(4108),c=a(1776),s=a(6436),u=a(5757),l=a(639),g=a(1541),f=a(8583),p=a(665);function Z(t,i){if(1&t){var n=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td"),l.TgZ(2,"input",16),l.NdJ("ngModelChange",function(t){return l.CHM(n).$implicit.isSelected=t}),l.qZA(),l.qZA(),l.TgZ(3,"td"),l.TgZ(4,"button",17),l.NdJ("click",function(){var t=l.CHM(n),i=t.$implicit,e=t.index;return l.oxw(2).onEdit(i,e)}),l._uU(5," \u7de8\u8f2f "),l.qZA(),l.qZA(),l.TgZ(6,"td"),l.TgZ(7,"span"),l._uU(8),l.qZA(),l.qZA(),l.TgZ(9,"td"),l.TgZ(10,"span"),l._uU(11),l.qZA(),l.qZA(),l.TgZ(12,"td"),l.TgZ(13,"span"),l._uU(14),l.qZA(),l.qZA(),l.TgZ(15,"td"),l.TgZ(16,"span"),l._uU(17),l.qZA(),l.qZA(),l.TgZ(18,"td"),l.TgZ(19,"span"),l._uU(20),l.qZA(),l.qZA(),l.TgZ(21,"td"),l.TgZ(22,"span"),l._uU(23),l.qZA(),l.qZA(),l.qZA()}if(2&t){var e=i.$implicit,a=i.index;l.xp6(2),l.MGl("name","id",a,""),l.Q6J("checked",e.isSelected)("ngModel",e.isSelected),l.xp6(6),l.Oqu(e.name),l.xp6(3),l.Oqu(e.distict),l.xp6(3),l.Oqu(e.houseHolds),l.xp6(3),l.Oqu(e.persons),l.xp6(3),l.Oqu(e.floors),l.xp6(3),l.Oqu(e.progress)}}var v=function(t){return{active:t}};function d(t,i){if(1&t){var n=l.EpF();l.TgZ(0,"li",18),l.TgZ(1,"a",13),l.NdJ("click",function(){var t=l.CHM(n).$implicit;return l.oxw(2).changePage("change",t)}),l._uU(2),l.qZA(),l.qZA()}if(2&t){var e=i.$implicit,a=l.oxw(2);l.Q6J("ngClass",l.VKq(2,v,e===a.pagination.pageStart)),l.xp6(2),l.Oqu(e)}}function A(t,i){if(1&t){var n=l.EpF();l.ynx(0),l.TgZ(1,"button",4),l.NdJ("click",function(){return l.CHM(n),l.oxw().onClear()}),l._uU(2," \u6e05\u9664\u672c\u5730\u7aef\u8cc7\u6599 "),l.qZA(),l.TgZ(3,"button",5),l.NdJ("click",function(){return l.CHM(n),l.oxw().onRemoveFavoritesAttractions()}),l._uU(4," \u5f9e\u6211\u7684\u6700\u611b\u4e2d\u79fb\u9664 "),l.qZA(),l.TgZ(5,"form",6,7),l.TgZ(7,"table",8),l.TgZ(8,"thead"),l.TgZ(9,"tr"),l._UZ(10,"td",9),l.TgZ(11,"td"),l._uU(12,"Action"),l.qZA(),l.TgZ(13,"td"),l._uU(14),l.qZA(),l.TgZ(15,"td"),l._uU(16),l.qZA(),l.TgZ(17,"td"),l._uU(18),l.qZA(),l.TgZ(19,"td"),l._uU(20),l.qZA(),l.TgZ(21,"td"),l._uU(22),l.qZA(),l.TgZ(23,"td"),l._uU(24),l.qZA(),l.qZA(),l.qZA(),l.TgZ(25,"tbody"),l.YNc(26,Z,24,9,"tr",10),l.qZA(),l.qZA(),l.qZA(),l.TgZ(27,"nav"),l.TgZ(28,"ul",11),l.TgZ(29,"li",12),l.TgZ(30,"a",13),l.NdJ("click",function(){return l.CHM(n),l.oxw().changePage("previous")}),l._uU(31,"Previous"),l.qZA(),l.qZA(),l.TgZ(32,"div",14),l.YNc(33,d,3,4,"li",15),l.qZA(),l.TgZ(34,"li",12),l.TgZ(35,"a",13),l.NdJ("click",function(){return l.CHM(n),l.oxw().changePage("next")}),l._uU(36,"Next"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.BQk()}if(2&t){var e=l.oxw();l.xp6(14),l.Oqu(e.attractionText.NAME),l.xp6(2),l.Oqu(e.attractionText.DISTICT),l.xp6(2),l.Oqu(e.attractionText.HOUSEHOLDS),l.xp6(2),l.Oqu(e.attractionText.PERSONS),l.xp6(2),l.Oqu(e.attractionText.FLOORS),l.xp6(2),l.Oqu(e.attractionText.PROGRESS),l.xp6(2),l.Q6J("ngForOf",e.filteredPageAttractions),l.xp6(7),l.Q6J("ngForOf",e.pagination.pageList)}}function h(t,i){1&t&&l._uU(0,"\u672c\u5730\u7aef\u5c1a\u672a\u6709\u5132\u5b58\u4e4b\u8cc7\u6599\u3002")}function q(t,i){}var T,m=[{path:"",component:(T=function(){function n(i,e){t(this,n),this.favoritesService=i,this.componentFactoryResolver=e,this.title=c.$b.FAVORITES,this.favoritesAttractions=[],this.filteredAttractions=[],this.filteredPageAttractions=[],this.pagination=new r.t,this.attractionText=c.p_}var e,a,o;return e=n,(a=[{key:"ngOnInit",value:function(){var t=this;this.favoritesAttractions=this.favoritesService.getFavoritesAttractions(),this.initAttractions(),this.favoritesAttractionsSubscription$=this.favoritesService.favoritesAttractionsChanged$.subscribe(function(i){t.favoritesAttractions=i,t.initAttractions()})}},{key:"ngOnDestroy",value:function(){this.favoritesAttractionsSubscription$.unsubscribe()}},{key:"onEdit",value:function(t,i){var n=this,e=this.componentFactoryResolver.resolveComponentFactory(s.z),a=this.modalHost.viewContainerRef;a.clear();var o=a.createComponent(e);o.instance.formData=t,this.closeSub$=o.instance.close$.subscribe(function(t){if(t){var e=n.pagination.itemStart;console.log(e,", ",n.pagination.itemEnd);var o=i+e;console.log("realIndex= ",o),n.favoritesService.updateFavoritesAttraction(o,t)}n.closeSub$.unsubscribe(),a.clear()})}},{key:"initAttractions",value:function(){this.filteredAttractions=this.favoritesAttractions,this.buildPageList(this.filteredAttractions),this.filterAttractions(this.filteredAttractions)}},{key:"buildPageList",value:function(t){this.pagination.buildPageList(t)}},{key:"filterAttractions",value:function(t){var i=this.pagination.itemEnd,n=this.pagination.itemStart;this.filteredPageAttractions=t.filter(function(t,e){return e>=n&&e<i})}},{key:"changePage",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.pagination.alterPage(t,i),this.filterAttractions(this.filteredAttractions)}},{key:"onClear",value:function(){this.favoritesService.clearLocalStorage()}},{key:"onRemoveFavoritesAttractions",value:function(){this.favoritesService.removeFavoritesAttractions()}}])&&i(e.prototype,a),o&&i(e,o),n}(),T.\u0275fac=function(t){return new(t||T)(l.Y36(g.G),l.Y36(l._Vd))},T.\u0275cmp=l.Xpm({type:T,selectors:[["app-favorites"]],viewQuery:function(t,i){var n;1&t&&l.Gf(u.b,5),2&t&&l.iGM(n=l.CRH())&&(i.modalHost=n.first)},decls:6,vars:3,consts:[[1,"isMobile"],[4,"ngIf","ngIfElse"],["noData",""],["appPlaceholder",""],["type","button","margin-right","",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"overflow-x"],["f","ngForm"],["margin-top","",1,"table"],["width","5%"],[4,"ngFor","ngForOf"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click"],[1,"d-flex","overflow-x"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],["type","checkbox","ngModel","",3,"checked","name","ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"page-item",3,"ngClass"]],template:function(t,i){if(1&t&&(l.TgZ(0,"h3",0),l._uU(1),l.qZA(),l.YNc(2,A,37,8,"ng-container",1),l.YNc(3,h,1,0,"ng-template",null,2,l.W1O),l.YNc(5,q,0,0,"ng-template",3)),2&t){var n=l.MAs(4);l.xp6(1),l.Oqu(i.title),l.xp6(1),l.Q6J("ngIf",i.favoritesAttractions.length>0)("ngIfElse",n)}},directives:[f.O5,u.b,p._Y,p.JL,p.F,f.sg,p.Wl,p.JJ,p.On,f.mk],styles:[""]}),T)}],x=function(){var i=function i(){t(this,i)};return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[o.Bz.forChild(m)],o.Bz]}),i}(),b=a(4466),O=function(){var i=function i(){t(this,i)};return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[b.m,x]]}),i}()}}])}();