"use strict";(self.webpackChunkangular_travel=self.webpackChunkangular_travel||[]).push([[565],{5565:function(t,i,n){n.r(i),n.d(i,{FavoritesModule:function(){return x}});var e=n(5528),o=n(4108),a=n(1776),s=n(6436),r=n(5757),c=n(639),g=n(1541),l=n(8583),u=n(665);function p(t,i){if(1&t){const t=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c.TgZ(2,"input",16),c.NdJ("ngModelChange",function(i){return c.CHM(t).$implicit.isSelected=i}),c.qZA(),c.qZA(),c.TgZ(3,"td"),c.TgZ(4,"button",17),c.NdJ("click",function(){const i=c.CHM(t),n=i.$implicit,e=i.index;return c.oxw(2).onEdit(n,e)}),c._uU(5," \u7de8\u8f2f "),c.qZA(),c.qZA(),c.TgZ(6,"td"),c.TgZ(7,"span"),c._uU(8),c.qZA(),c.qZA(),c.TgZ(9,"td"),c.TgZ(10,"span"),c._uU(11),c.qZA(),c.qZA(),c.TgZ(12,"td"),c.TgZ(13,"span"),c._uU(14),c.qZA(),c.qZA(),c.TgZ(15,"td"),c.TgZ(16,"span"),c._uU(17),c.qZA(),c.qZA(),c.TgZ(18,"td"),c.TgZ(19,"span"),c._uU(20),c.qZA(),c.qZA(),c.TgZ(21,"td"),c.TgZ(22,"span"),c._uU(23),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=i.$implicit,n=i.index;c.xp6(2),c.MGl("name","id",n,""),c.Q6J("checked",t.isSelected)("ngModel",t.isSelected),c.xp6(6),c.Oqu(t.name),c.xp6(3),c.Oqu(t.distict),c.xp6(3),c.Oqu(t.houseHolds),c.xp6(3),c.Oqu(t.persons),c.xp6(3),c.Oqu(t.floors),c.xp6(3),c.Oqu(t.progress)}}const Z=function(t){return{active:t}};function f(t,i){if(1&t){const t=c.EpF();c.TgZ(0,"li",18),c.TgZ(1,"a",13),c.NdJ("click",function(){const i=c.CHM(t).$implicit;return c.oxw(2).changePage("change",i)}),c._uU(2),c.qZA(),c.qZA()}if(2&t){const t=i.$implicit,n=c.oxw(2);c.Q6J("ngClass",c.VKq(2,Z,t===n.pagination.pageStart)),c.xp6(2),c.Oqu(t)}}function d(t,i){if(1&t){const t=c.EpF();c.ynx(0),c.TgZ(1,"button",4),c.NdJ("click",function(){return c.CHM(t),c.oxw().onClear()}),c._uU(2," \u6e05\u9664\u672c\u5730\u7aef\u8cc7\u6599 "),c.qZA(),c.TgZ(3,"button",5),c.NdJ("click",function(){return c.CHM(t),c.oxw().onRemoveFavoritesAttractions()}),c._uU(4," \u5f9e\u6211\u7684\u6700\u611b\u4e2d\u79fb\u9664 "),c.qZA(),c.TgZ(5,"form",6,7),c.TgZ(7,"table",8),c.TgZ(8,"thead"),c.TgZ(9,"tr"),c._UZ(10,"td",9),c.TgZ(11,"td"),c._uU(12,"Action"),c.qZA(),c.TgZ(13,"td"),c._uU(14),c.qZA(),c.TgZ(15,"td"),c._uU(16),c.qZA(),c.TgZ(17,"td"),c._uU(18),c.qZA(),c.TgZ(19,"td"),c._uU(20),c.qZA(),c.TgZ(21,"td"),c._uU(22),c.qZA(),c.TgZ(23,"td"),c._uU(24),c.qZA(),c.qZA(),c.qZA(),c.TgZ(25,"tbody"),c.YNc(26,p,24,9,"tr",10),c.qZA(),c.qZA(),c.qZA(),c.TgZ(27,"nav"),c.TgZ(28,"ul",11),c.TgZ(29,"li",12),c.TgZ(30,"a",13),c.NdJ("click",function(){return c.CHM(t),c.oxw().changePage("previous")}),c._uU(31,"Previous"),c.qZA(),c.qZA(),c.TgZ(32,"div",14),c.YNc(33,f,3,4,"li",15),c.qZA(),c.TgZ(34,"li",12),c.TgZ(35,"a",13),c.NdJ("click",function(){return c.CHM(t),c.oxw().changePage("next")}),c._uU(36,"Next"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.BQk()}if(2&t){const t=c.oxw();c.xp6(14),c.Oqu(t.attractionText.NAME),c.xp6(2),c.Oqu(t.attractionText.DISTICT),c.xp6(2),c.Oqu(t.attractionText.HOUSEHOLDS),c.xp6(2),c.Oqu(t.attractionText.PERSONS),c.xp6(2),c.Oqu(t.attractionText.FLOORS),c.xp6(2),c.Oqu(t.attractionText.PROGRESS),c.xp6(2),c.Q6J("ngForOf",t.filteredPageAttractions),c.xp6(7),c.Q6J("ngForOf",t.pagination.pageList)}}function A(t,i){1&t&&c._uU(0,"\u672c\u5730\u7aef\u5c1a\u672a\u6709\u5132\u5b58\u4e4b\u8cc7\u6599\u3002")}function h(t,i){}const q=[{path:"",component:(()=>{class t{constructor(t,i){this.favoritesService=t,this.componentFactoryResolver=i,this.title=a.$b.FAVORITES,this.favoritesAttractions=[],this.filteredAttractions=[],this.filteredPageAttractions=[],this.pagination=new o.t,this.attractionText=a.p_}ngOnInit(){this.favoritesAttractions=this.favoritesService.getFavoritesAttractions(),this.initAttractions(),this.favoritesAttractionsSubscription$=this.favoritesService.favoritesAttractionsChanged$.subscribe(t=>{this.favoritesAttractions=t,this.initAttractions()})}ngOnDestroy(){this.favoritesAttractionsSubscription$.unsubscribe()}onEdit(t,i){const n=this.componentFactoryResolver.resolveComponentFactory(s.z),e=this.modalHost.viewContainerRef;e.clear();const o=e.createComponent(n);o.instance.formData=t,this.closeSub$=o.instance.close$.subscribe(t=>{if(t){const n=this.pagination.itemStart;console.log(n,", ",this.pagination.itemEnd);const e=i+n;console.log("realIndex= ",e),this.favoritesService.updateFavoritesAttraction(e,t)}this.closeSub$.unsubscribe(),e.clear()})}initAttractions(){this.filteredAttractions=this.favoritesAttractions,this.buildPageList(this.filteredAttractions),this.filterAttractions(this.filteredAttractions)}buildPageList(t){this.pagination.buildPageList(t)}filterAttractions(t){const i=this.pagination.itemEnd,n=this.pagination.itemStart;this.filteredPageAttractions=t.filter((t,e)=>e>=n&&e<i)}changePage(t,i=null){this.pagination.alterPage(t,i),this.filterAttractions(this.filteredAttractions)}onClear(){this.favoritesService.clearLocalStorage()}onRemoveFavoritesAttractions(){this.favoritesService.removeFavoritesAttractions()}}return t.\u0275fac=function(i){return new(i||t)(c.Y36(g.G),c.Y36(c._Vd))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-favorites"]],viewQuery:function(t,i){if(1&t&&c.Gf(r.b,5),2&t){let t;c.iGM(t=c.CRH())&&(i.modalHost=t.first)}},decls:6,vars:3,consts:[[1,"isMobile"],[4,"ngIf","ngIfElse"],["noData",""],["appPlaceholder",""],["type","button","margin-right","",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"overflow-x"],["f","ngForm"],["margin-top","",1,"table"],["width","5%"],[4,"ngFor","ngForOf"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click"],[1,"d-flex","overflow-x"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],["type","checkbox","ngModel","",3,"checked","name","ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"page-item",3,"ngClass"]],template:function(t,i){if(1&t&&(c.TgZ(0,"h3",0),c._uU(1),c.qZA(),c.YNc(2,d,37,8,"ng-container",1),c.YNc(3,A,1,0,"ng-template",null,2,c.W1O),c.YNc(5,h,0,0,"ng-template",3)),2&t){const t=c.MAs(4);c.xp6(1),c.Oqu(i.title),c.xp6(1),c.Q6J("ngIf",i.favoritesAttractions.length>0)("ngIfElse",t)}},directives:[l.O5,r.b,u._Y,u.JL,u.F,l.sg,u.Wl,u.JJ,u.On,l.mk],styles:[""]}),t})()}];let T=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[e.Bz.forChild(q)],e.Bz]}),t})();var v=n(4466);let x=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[v.m,T]]}),t})()}}]);